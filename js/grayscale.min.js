/*!
 * Start Bootstrap - Grayscale v5.0.8 (https://startbootstrap.com/template-overviews/grayscale)
 * Copyright 2013-2019 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-grayscale/blob/master/LICENSE)
 */

"use strict";var state,FEATURES=["gpu","provider","region","hours"];function getRandomInt(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}function findGetParameter(e){var n=null,o=[];return location.search.substr(1).split("&").forEach(function(t){(o=t.split("="))[0]===e&&(n=decodeURIComponent(o[1]))}),n}function insertParam(t,e,n){e=encodeURI(e),n=encodeURI(n);for(var o,r=t.length;r--;)if((o=t[r].split("="))[0]==e){o[1]=n,t[r]=o.join("=");break}return r<0&&(t[t.length]=[e,n].join("=")),t}function sc(t){$("html,body").animate({scrollTop:$("#"+t).offset().top-parseInt($("#"+t).height()/1.2)},"slow")}!function(i){i('a.js-scroll-trigger[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=i(this.hash);if((t=t.length?t:i("[name="+this.hash.slice(1)+"]")).length)return i("html, body").animate({scrollTop:t.offset().top-70},1e3,"easeInOutExpo"),!1}}),i(".js-scroll-trigger").click(function(){i(".navbar-collapse").collapse("hide")}),i("body").scrollspy({target:"#mainNav",offset:100});function t(){100<i("#mainNav").offset().top?i("#mainNav").addClass("navbar-shrink"):i("#mainNav").removeClass("navbar-shrink")}t(),i(window).scroll(t);function o(){["gpu","region","provider"].forEach(function(t,e){i("#compute-"+t).html(state[t+"s"].map(function(t,e){return'<option value="'.concat(t.name,'">').concat(t.name,"</option>")}).join(""))})}function n(){var t={gpu:i("#compute-gpu option:selected").text(),provider:i("#compute-provider option:selected").text(),region:i("#compute-region option:selected").text(),hours:parseInt(i("#compute-hours").val(),10)};console.log({values:t});var n=!1;return FEATURES.forEach(function(t,e){c(e,t)||(function(t){i("#result-card").hide(),i(".spinner-border").hide(),i("#compute-"+t).css("border","2px solid red"),o()}(e),n=!0)}),n?null:t}var a=function(t){var e=[];for(var n in t){if(t.hasOwnProperty(n))e=insertParam(e,n,t[n])}window.history.pushState("","","?"+e.join("&"))},s=function(t){for(var e=0,n=FEATURES;e<n.length;e++){var o=n[e];t.hasOwnProperty(o)&&i("#compute-"+o).val(t[o])}},c=function(t,n){switch(i("#compute-hours").css("border",""),t){case"gpu":return console.log(state.gpus,n),state.gpus.filter(function(t,e){return t.name===n}).length;case"hours":return Number.isInteger(n)&&0<n&&n<1e6;case"provider":return state.providers.filter(function(t,e){return t.name===n}).length;case"region":return state.regions.filter(function(t,e){return t.name===n}).length;default:return!0}};i.getJSON("/data/config.json",function(t){state=t,console.log({data:t}),o(),function(){for(var t={},e=0,n=FEATURES;e<n.length;e++){var o=n[e],r=findGetParameter(o);console.log(o,r,c(o,r)),"hours"===o&&(r=parseInt(r)),r&&c(o,r)&&(t[o]=r)}console.log("get param values",t),i.isEmptyObject(t)?window.history.pushState("","",window.location.pathname):(a(t),s(t),setTimeout(function(){i("#compute-nav-link").trigger("click")},500))}()}),i("#compute-form").submit(function(t){return console.log("Submitting..."),function(t){i("#result-card").hide(),i(".spinner-border").show();var e=t||n();e&&(a(e),setTimeout(function(){i(".spinner-border").hide(),i("#result-card").fadeIn(),i(window).width()<769&&i("#goToResults").trigger("click")},getRandomInt(500,1200)))}(),!1}),i(".compute-input").change(function(){i("#compute-submit").prop("disabled",!0),n()&&i("#compute-submit").prop("disabled",!1)})}(jQuery);